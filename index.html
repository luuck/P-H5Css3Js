<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="keywords" content="h5,css3,js">
    <meta name="description" content="页面的无缝滚动,视觉差效果,异步编程,css3动画过渡,js动画实现,h5的音乐效果">
    <meta name="author" content="luuck">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="ie-stand">
    <title>h5+css3+js</title>
    <link rel="stylesheet" href="assets/css/index.css">
    <link rel="stylesheet" href="assets/css/pageA.css">
    <link rel="stylesheet" href="assets/css/pageB.css">
    <!--<link rel="stylesheet" href="assets/css/pageC.css">-->
    <!--<script src="http://img.mukewang.com/down/55ac9a860001a6c500000000.js"></script>-->
    <style type="text/css">
        button {
            width: 100px;
            height: 50px;
        }

        .button {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 100;
        }
    </style>
</head>

<body>
<div class="button">
    <button>开始</button>
    <!--<button>关门</button>-->
</div>
<div id='content'>
    <ul class='content-wrap'>
        <!-- 第一副画面 -->
        <li>
            <div class="a_background">
                <div class="a_background_top"></div>
                <div class="a_background_middle"></div>
                <div class="a_background_botton"></div>
            </div>
            <!-- 云 -->
            <div class="cloudArea">
                <div class="cloud cloud1"></div>
                <div class="cloud cloud2"></div>
            </div>
            <!-- 太阳 -->
            <div id="sun"></div>
        </li>
        <!-- 第二副画面 -->
        <li>
            <!-- 背景图 -->
            <div class="b_background"></div>
            <div class="b_background_preload"></div>
            <!-- 商店 -->
            <div class="shop">
                <div class="door">
                    <div class="door-left"></div>
                    <div class="door-right"></div>
                </div>
                <!-- 灯 -->
                <div class="lamp"></div>
                <!-- 鸟 -->
                <div class="bird"></div>
            </div>
        </li>
        <!-- 第三副画面 -->
        <li>
            <!-- 背景图 -->
            <div class="c_background">
                <div class="c_background_top"></div>
                <div class="c_background_middle"></div>
                <div class="c_background_botton"></div>
            </div>
            <!-- 小女孩 -->
            <div class="girl"></div>
            <!-- 水波 -->
            <div class="bridge-bottom">
                <div class="water">
                    <div id="water1" class="water_1"></div>
                    <div id="water2" class="water_2"></div>
                    <div id="water3" class="water_3"></div>
                    <div id="water4" class="water_4"></div>
                </div>
            </div>
            <!-- 星星 -->
            <ul class="stars">
                <li class="stars1"></li>
                <li class="stars2"></li>
                <li class="stars3"></li>
                <li class="stars4"></li>
                <li class="stars5"></li>
                <li class="stars6"></li>
            </ul>
            <!-- 飘花 -->
            <div id="snowflake"></div>
        </li>
    </ul>
    <div id="boy" class="charector"></div>
</div>

<script src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>
<script src="http://ricostacruz.com/jquery.transit/jquery.transit.min.js"></script>
<script src="assets/js/swipe.js"></script>
<!--<script src="js/index.js"></script>-->
<script src="assets/js/action.js"></script>
<script>
    $(function () {
        ////////////////////////////////////////////////////////
        //=================== 动画处理 ====================== //
        ////////////////////////////////////////////////////////

        //////////
        // 小孩走路 //
        //////////
        var boy = BoyWalk();

        /////////
        //右边飞鸟 //
        /////////
        var bird = {
            elem: $(".bird"),
            fly: function() {
                this.elem.addClass('birdFly')
                this.elem.transition({
                    right: container.width()
                }, 15000, 'linear');
            }
        };

        // swipe.scrollTo(container * 2, 0);

        // 开始
        $("button:first").click(function () {

            // 太阳公转
            $("#sun").addClass('rotation');
            // 飘云
            $(".cloud:first").addClass('cloud1Anim');
            $(".cloud:last").addClass('cloud2Anim');

            boy.walkTo(2000, 0.2)
                .then(function () {
                    //第一次走路完成
                    // 开始页面滚动
                    scrollTo(5000, 1);
                }).then(function () {
                //第二次走
                return boy.walkTo(5000, 0.5)
            })
                .then(function () {
                    //暂停走路
                    boy.stopWalk()
                })
                .then(function () {
                    //开门
                    return openDoor();
                })
                .then(function () {
                    //开灯
                    lamp.bright()
                })
                .then(function () {
                    //进商店
                    return boy.toShop(2000)
                }).then(function () {

                    // 取花
                    return boy.talkFlower();
                }).then(function() {
                    // 飞鸟
                    bird.fly();
                }).then(function () {

                    //出商店
                    return boy.outShop(2000)
                }).then(function(){
                    // 关门
                    return shutDoor();
                }).then(function () {
                    //灯暗
                    lamp.dark()
                });

            // 开始第一次走路
            /* boy.walkTo(2000, 0.2)
                 .then(function() {
                     //第一次走路完成
                     // 开始页面滚动
                     scrollTo(5000, 1);
                     // boy.setColoer('red')
                 }).then(function() {
                 //第二次走
                 return boy.walkTo(5000, 0.5)
             }).then(function() {
                 //第二次走路完成
                 openDoor().then(function() {
                     // 开灯
                     lamp.bright();
                 });;
                 shutDoor().then(function() {
                     // 关灯
                     lamp.dark();
                 });;
                 // boy.setColoer('yellow')
             }).then(function() {
                 //第三次走路
                 // return boy.walkTo(2000, 0.6)
             }).then(function() {
                 //第三次走路完成
                 // boy.setColoer('blue')
             });*/

        });

    });

    /* $(function() {

         //////////
         // 小孩走路 //
         //////////
         var boy = BoyWalk();

         boy.talkFlower();

         // 音乐配置
         var audioConfig = {
             enable: true, // 是否开启音乐
             playURl: 'music/happy.wav', // 正常播放地址
             cycleURL: 'music/circulation.wav' // 正常循环播放地址
         };

         /////////
         //背景音乐 //
         /////////
         function Hmlt5Audio(url, isloop) {
             var audio = new Audio(url);
             audio.autoPlay = true;
             audio.loop = isloop || false;
             audio.play();
             return {
                 end: function(callback) {
                     audio.addEventListener('ended', function() {
                         callback();
                     }, false);
                 }
             };
         }

         // 开始
         $("button").click(function() {
             var audio1 = Hmlt5Audio(audioConfig.playURl);
             audio1.end(function() {
                 Hmlt5Audio(audioConfig.cycleURL, true);
             });
         });
     })*/

    /* $(function() {
         var snowflakeURl = [
             'http://img.mukewang.com/55adde120001d34e00410041.png',
             'http://img.mukewang.com/55adde2a0001a91d00410041.png',
             'http://img.mukewang.com/55adde5500013b2500400041.png',
             'http://img.mukewang.com/55adde62000161c100410041.png',
             'http://img.mukewang.com/55adde7f0001433000410041.png',
             'http://img.mukewang.com/55addee7000117b500400041.png'
         ]

         ///////
         //飘雪花 //
         ///////
         function snowflake() {
             // 雪花容器
             var $flakeContainer = $('#snowflake');

             // 随机六张图
             function getImagesName() {
                 return snowflakeURl[[Math.floor(Math.random() * 6)]];
             }
             // 创建一个雪花元素
             function createSnowBox() {
                 var url = getImagesName();
                 return $('<div class="snowbox" />').css({
                     'width': 41,
                     'height': 41,
                     'position': 'absolute',
                     'backgroundSize': 'cover',
                     'zIndex': 100000,
                     'top': '-41px',
                     'backgroundImage': 'url(' + url + ')'
                 }).addClass('snowRoll');
             }
             // 开始飘花
             setInterval(function() {
                 // 运动的轨迹
                 var startPositionLeft = Math.random() * visualWidth - 100,
                     startOpacity    = 1,
                     endPositionTop  = visualHeight - 40,
                     endPositionLeft = startPositionLeft - 100 + Math.random() * 500,
                     duration        = visualHeight * 10 + Math.random() * 5000;

                 // 随机透明度，不小于0.5
                 var randomStart = Math.random();
                 randomStart = randomStart < 0.5 ? startOpacity : randomStart;

                 // 创建一个雪花
                 var $flake = createSnowBox();

                 // 设计起点位置
                 $flake.css({
                     left: startPositionLeft,
                     opacity : randomStart
                 });

                 // 加入到容器
                 $flakeContainer.append($flake);

                 // 开始执行动画
                 $flake.transition({
                     top: endPositionTop,
                     left: endPositionLeft,
                     opacity: 0.7
                 }, duration, 'ease-out', function() {
                     $(this).remove() //结束后删除
                 });

             }, 200);
         }


         //开始
         $("button:first").click(function() {
             snowflake()
         })

     })*/
    /* $(function() {

         var container = $("#content");
         var swipe = Swipe(container);
         // 页面滚动到指定的位置
         function scrollTo(time, proportionX) {
             var distX = container.width() * proportionX;
             swipe.scrollTo(distX, time);
         }

         ////////////////////////////////////////////////////////
         //=================== 动画处理 =======================//
         ////////////////////////////////////////////////////////

         var boy = BoyWalk();

         // 开始
         $("button:first").click(function() {
             // 太阳公转
             $("#sun").addClass('rotation');

             // 飘云
             $(".cloud:first").addClass('cloud1Anim');
             $(".cloud:last").addClass('cloud2Anim');

             // 开始第一次走路
             boy.walkTo(2000, 0.2)
                 .then(function() {
                     // 第一次走路完成
                     // 开始页面滚动
                     scrollTo(5000, 1);
                 }).then(function() {
                 // 第二次走路
                 return boy.walkTo(5000, 0.5);
             });
         });

     })*/
    /* $(function () {

         var container = $("#content");
         var swipe = Swipe(container);

         ////////////////////////////////////////////////////////
         //=================== 动画处理 ====================== //
         ////////////////////////////////////////////////////////

         //////////
         // 小孩走路 //
         //////////
         var boy = BoyWalk();

         // 开始
         $("button:first").click(function () {

             // 开始第一次走路
             boy.walkTo(2000, 0.2)
                 .then(function () {
                     //第一次走路完成
                     boy.setColoer('red')
                 }).then(function () {
                 //第二次走
                 return boy.walkTo(2000, 0.4)
             }).then(function () {
                 //第二次走路完成
                 boy.setColoer('yellow')
             }).then(function () {
                 //第三次走路
                 return boy.walkTo(2000, 0.6)
             }).then(function () {
                 //第三次走路完成
                 boy.setColoer('blue')
             });

         });

     })*/
</script>

</body>

</html>